"use strict";
var _a;
Object.defineProperty(exports, "__esModule", { value: true });
exports.LlamaIndexDataLoader = void 0;
const JSII_RTTI_SYMBOL_1 = Symbol.for("jsii.rtti");
/**
 *  Copyright Amazon.com, Inc. or its affiliates. All Rights Reserved.
 *
 *  Licensed under the Apache License, Version 2.0 (the "License"). You may not use this file except in compliance
 *  with the License. A copy of the License is located at
 *
 *      http://www.apache.org/licenses/LICENSE-2.0
 *
 *  or in the 'license' file accompanying this file. This file is distributed on an 'AS IS' BASIS, WITHOUT WARRANTIES
 *  OR CONDITIONS OF ANY KIND, express or implied. See the License for the specific language governing permissions
 *  and limitations under the License.
 */
const node_path_1 = require("node:path");
const aws_cdk_lib_1 = require("aws-cdk-lib");
const aws_ec2_1 = require("aws-cdk-lib/aws-ec2");
const aws_ecr_assets_1 = require("aws-cdk-lib/aws-ecr-assets");
const aws_ecs_1 = require("aws-cdk-lib/aws-ecs");
const aws_ecs_patterns_1 = require("aws-cdk-lib/aws-ecs-patterns");
const aws_iam_1 = require("aws-cdk-lib/aws-iam");
const aws_kms_1 = require("aws-cdk-lib/aws-kms");
const aws_s3_1 = require("aws-cdk-lib/aws-s3");
const aws_s3_notifications_1 = require("aws-cdk-lib/aws-s3-notifications");
const aws_sns_1 = require("aws-cdk-lib/aws-sns");
const aws_sns_subscriptions_1 = require("aws-cdk-lib/aws-sns-subscriptions");
const aws_sqs_1 = require("aws-cdk-lib/aws-sqs");
const aws_ssm_1 = require("aws-cdk-lib/aws-ssm");
const cdk_nag_1 = require("cdk-nag");
const base_class_1 = require("../../../common/base-class");
class LlamaIndexDataLoader extends base_class_1.BaseClass {
    constructor(scope, id, props) {
        super(scope, id);
        const baseProps = {
            stage: props.stage,
            constructName: base_class_1.ConstructName.AWSLLAMAINDEXDATALOADER,
            constructId: id,
            observability: props.observability,
        };
        this.updateEnvSuffix(baseProps);
        this.addObservabilityToConstruct(baseProps);
        // Update the optional properties to their defaults
        this.dockerImageAssetDirectory = props.dockerImageAssetDirectory ?? (0, node_path_1.join)(__dirname, '..', '..', '..', '..', 'resources', 'gen-ai', 'aws-llama-index-data-loader', 'docker');
        this.memoryLimitMiB = props.memoryLimitMiB ?? 2048;
        this.containerLoggingLevel = props.containerLoggingLevel ?? 'WARNING';
        let bucketsInvolved = [];
        if (props.outputBucket) {
            this.outputBucket = props.outputBucket;
        }
        else {
            this.bucketKey = new aws_kms_1.Key(this, 'LogBucketKey', {
                enableKeyRotation: true,
            });
            this.logBucket = new aws_s3_1.Bucket(this, 'LogBucket', {
                enforceSSL: true,
                versioned: true,
                encryption: aws_s3_1.BucketEncryption.KMS,
                encryptionKey: this.bucketKey,
                bucketKeyEnabled: true,
                removalPolicy: aws_cdk_lib_1.RemovalPolicy.DESTROY,
                autoDeleteObjects: true,
                objectLockEnabled: true,
                objectLockDefaultRetention: {
                    mode: aws_s3_1.ObjectLockMode.GOVERNANCE,
                    duration: aws_cdk_lib_1.Duration.days(1),
                },
                blockPublicAccess: aws_s3_1.BlockPublicAccess.BLOCK_ALL,
            });
            bucketsInvolved.push(this.logBucket);
            this.outputBucket = new aws_s3_1.Bucket(this, 'Output', {
                enforceSSL: true,
                versioned: true,
                serverAccessLogsBucket: this.logBucket,
                serverAccessLogsPrefix: 'output-bucket-access-logs',
                encryption: aws_s3_1.BucketEncryption.KMS,
                encryptionKey: this.bucketKey,
                bucketKeyEnabled: true,
                blockPublicAccess: aws_s3_1.BlockPublicAccess.BLOCK_ALL,
                removalPolicy: aws_cdk_lib_1.RemovalPolicy.DESTROY,
                autoDeleteObjects: true,
                objectLockEnabled: true,
                objectLockDefaultRetention: {
                    mode: aws_s3_1.ObjectLockMode.GOVERNANCE,
                    duration: aws_cdk_lib_1.Duration.days(1),
                },
                lifecycleRules: [
                    {
                        id: 'AbortIncompleteMultipartUpload',
                        enabled: true,
                        abortIncompleteMultipartUploadAfter: aws_cdk_lib_1.Duration.days(1),
                    },
                ],
            });
        }
        bucketsInvolved.push(this.outputBucket);
        // Create a new SSM Parameter holding a String
        const circuitBreakerParameter = new aws_ssm_1.StringParameter(this, 'CircuitBreaker', {
            stringValue: 'False',
        });
        const asset = new aws_ecr_assets_1.DockerImageAsset(this, 'Image', {
            directory: this.dockerImageAssetDirectory,
            platform: aws_ecr_assets_1.Platform.LINUX_AMD64,
        });
        const queue = new aws_sqs_1.Queue(this, 'Queue', {
            visibilityTimeout: aws_cdk_lib_1.Duration.seconds(300),
            enforceSSL: true,
            deadLetterQueue: {
                maxReceiveCount: 3,
                queue: new aws_sqs_1.Queue(this, 'DeadLetterQueue', {
                    enforceSSL: true,
                }),
            },
        });
        const queueProcessingFargateService = new aws_ecs_patterns_1.QueueProcessingFargateService(this, 'Service', {
            cluster: props.vpc === undefined ? new aws_ecs_1.Cluster(this, 'Cluster', {
                containerInsights: true,
            }) : undefined,
            vpc: props.vpc,
            memoryLimitMiB: this.memoryLimitMiB,
            runtimePlatform: {
                cpuArchitecture: aws_ecs_1.CpuArchitecture.X86_64,
                operatingSystemFamily: aws_ecs_1.OperatingSystemFamily.LINUX,
            },
            queue: queue,
            image: aws_ecs_1.ContainerImage.fromDockerImageAsset(asset),
            healthCheck: {
                command: ['CMD-SHELL', '/usr/src/app/healthcheck.sh'],
                interval: aws_cdk_lib_1.Duration.seconds(30),
                timeout: aws_cdk_lib_1.Duration.seconds(30),
                retries: 3,
                startPeriod: aws_cdk_lib_1.Duration.seconds(5),
            },
            enableLogging: true,
            environment: {
                CIRCUIT_BREAKER_SSM_PARAMETER_NAME: circuitBreakerParameter.parameterName,
                LOGGING_LEVEL: this.containerLoggingLevel,
                BUCKET_NAME: this.outputBucket.bucketName,
            },
            minScalingCapacity: 0,
            maxScalingCapacity: 10,
            scalingSteps: [
                { upper: 0, change: -1 },
                { lower: 1, change: +1 }, // because `minScalingCapacity` set at zero
                { lower: 100, change: +1 },
                { lower: 500, change: +5 },
            ],
        });
        this.queueProcessingFargateService = queueProcessingFargateService;
        // Setup Default S3 Example if Docker asset directory is missing
        if (!props.dockerImageAssetDirectory) {
            const rawBucket = new aws_s3_1.Bucket(this, 'Raw', {
                enforceSSL: true,
                versioned: true,
                serverAccessLogsBucket: this.logBucket,
                encryption: aws_s3_1.BucketEncryption.KMS,
                encryptionKey: this.bucketKey,
                bucketKeyEnabled: true,
                serverAccessLogsPrefix: 'raw-bucket-access-logs',
                blockPublicAccess: aws_s3_1.BlockPublicAccess.BLOCK_ALL,
                removalPolicy: aws_cdk_lib_1.RemovalPolicy.DESTROY,
                autoDeleteObjects: true,
                objectLockEnabled: true,
                objectLockDefaultRetention: {
                    mode: aws_s3_1.ObjectLockMode.GOVERNANCE,
                    duration: aws_cdk_lib_1.Duration.days(1),
                },
                lifecycleRules: [
                    {
                        id: 'AbortIncompleteMultipartUpload',
                        enabled: true,
                        abortIncompleteMultipartUploadAfter: aws_cdk_lib_1.Duration.days(1),
                    },
                ],
            });
            bucketsInvolved.push(rawBucket);
            const topicKey = new aws_kms_1.Key(this, 'TopicKey', {
                enableKeyRotation: true,
            });
            const topic = new aws_sns_1.Topic(this, 'Topic', {
                enforceSSL: true,
                masterKey: topicKey,
            });
            topicKey.addToResourcePolicy(new aws_iam_1.PolicyStatement({
                actions: ['kms:Decrypt', 'kms:GenerateDataKey*'],
                resources: ['*'],
                principals: [new aws_iam_1.ServicePrincipal('s3.amazonaws.com')],
            }));
            topic.grantPublish(new aws_iam_1.ServicePrincipal('s3.amazonaws.com'));
            rawBucket.addEventNotification(aws_s3_1.EventType.OBJECT_CREATED, new aws_s3_notifications_1.SnsDestination(topic));
            topic.addSubscription(new aws_sns_subscriptions_1.SqsSubscription(queue));
            this.queueProcessingFargateService.taskDefinition.addToTaskRolePolicy(new aws_iam_1.PolicyStatement({
                effect: aws_iam_1.Effect.ALLOW,
                actions: ['s3:GetObject'],
                resources: [rawBucket.bucketArn, rawBucket.bucketArn + '/*'],
            }));
            if (rawBucket.encryptionKey) {
                rawBucket.encryptionKey.grantDecrypt(this.queueProcessingFargateService.taskDefinition.taskRole);
                this.queueProcessingFargateService.taskDefinition.taskRole.addToPrincipalPolicy(new aws_iam_1.PolicyStatement({
                    effect: aws_iam_1.Effect.ALLOW,
                    actions: ['kms:GenerateDataKey'],
                    resources: [rawBucket.encryptionKey.keyArn],
                }));
            }
        }
        this.queueProcessingFargateService.cluster.vpc.addFlowLog('FlowLog', {
            destination: aws_ec2_1.FlowLogDestination.toS3(this.logBucket, 'vpc-flow-logs'),
        });
        circuitBreakerParameter.grantRead(this.queueProcessingFargateService.taskDefinition.taskRole);
        this.queueProcessingFargateService.taskDefinition.addToTaskRolePolicy(new aws_iam_1.PolicyStatement({
            effect: aws_iam_1.Effect.ALLOW,
            actions: ['s3:PutObject'],
            resources: [this.outputBucket.bucketArn, this.outputBucket.bucketArn + '/*'],
        }));
        if (this.outputBucket.encryptionKey) {
            this.outputBucket.encryptionKey.grantDecrypt(this.queueProcessingFargateService.taskDefinition.taskRole);
            this.queueProcessingFargateService.taskDefinition.taskRole.addToPrincipalPolicy(new aws_iam_1.PolicyStatement({
                effect: aws_iam_1.Effect.ALLOW,
                actions: ['kms:GenerateDataKey'],
                resources: [this.outputBucket.encryptionKey.keyArn],
            }));
        }
        ////////////////////////////////////////////////////////////////////////
        // NagSuppressions
        ////////////////////////////////////////////////////////////////////////
        if (this.logBucket) {
            cdk_nag_1.NagSuppressions.addResourceSuppressions(this.logBucket, [
                {
                    id: 'AwsSolutions-S1',
                    reason: 'There is no need to enable access logging for the AccessLogs bucket.',
                },
            ], true);
        }
        cdk_nag_1.NagSuppressions.addResourceSuppressions(bucketsInvolved, [
            {
                id: 'HIPAA.Security-S3BucketReplicationEnabled',
                reason: 'Replication for this use case is uneccessary.',
            },
            {
                id: 'NIST.800.53.R4-S3BucketReplicationEnabled',
                reason: 'Replication for this use case is uneccessary.',
            },
            {
                id: 'NIST.800.53.R5-S3BucketReplicationEnabled',
                reason: 'Replication for this use case is uneccessary.',
            },
            {
                id: 'PCI.DSS.321-S3BucketReplicationEnabled',
                reason: 'Replication for this use case is uneccessary.',
            },
        ], true);
        cdk_nag_1.NagSuppressions.addResourceSuppressions([this.queueProcessingFargateService.cluster.vpc], [
            {
                id: 'HIPAA.Security-VPCSubnetAutoAssignPublicIpDisabled',
                reason: 'default vpc creation',
            },
            {
                id: 'NIST.800.53.R5-VPCSubnetAutoAssignPublicIpDisabled',
                reason: 'default vpc creation',
            },
            {
                id: 'PCI.DSS.321-VPCSubnetAutoAssignPublicIpDisabled',
                reason: 'default vpc creation',
            },
            {
                id: 'HIPAA.Security-VPCNoUnrestrictedRouteToIGW',
                reason: 'default vpc creation',
            },
            {
                id: 'NIST.800.53.R5-VPCNoUnrestrictedRouteToIGW',
                reason: 'default vpc creation',
            },
            {
                id: 'PCI.DSS.321-VPCNoUnrestrictedRouteToIGW',
                reason: 'default vpc creation',
            },
        ], true);
        // Suppress findings for the BucketNotificationsHandler
        // https://github.com/aws/aws-cdk/issues/9552
        const bucketNotifications = aws_cdk_lib_1.Stack.of(this).node.tryFindChild('BucketNotificationsHandler050a0587b7544547bf325f094a3db834');
        if (bucketNotifications) {
            cdk_nag_1.NagSuppressions.addResourceSuppressions(bucketNotifications, [
                {
                    id: 'AwsSolutions-IAM4',
                    reason: 'AWSLambdaBasicExecutionRole is used by `addEventNotification`',
                    appliesTo: ['Policy::arn:<AWS::Partition>:iam::aws:policy/service-role/AWSLambdaBasicExecutionRole'],
                },
                {
                    id: 'AwsSolutions-IAM5',
                    reason: 'Suppress all AwsSolutions-IAM5 findings for this stack',
                    appliesTo: ['Resource::*'],
                },
                {
                    id: 'HIPAA.Security-IAMNoInlinePolicy',
                    reason: 'Inline policies are part of the BucketHandlerNotification',
                },
                {
                    id: 'NIST.800.53.R4-IAMNoInlinePolicy',
                    reason: 'Inline policies are part of the BucketHandlerNotification',
                },
                {
                    id: 'NIST.800.53.R5-IAMNoInlinePolicy',
                    reason: 'Inline policies are part of the BucketHandlerNotification',
                },
                {
                    id: 'PCI.DSS.321-IAMNoInlinePolicy',
                    reason: 'Inline policies are part of the BucketHandlerNotification',
                },
            ], true);
        }
        cdk_nag_1.NagSuppressions.addResourceSuppressions(this.queueProcessingFargateService, [
            {
                id: 'AwsSolutions-ECS2',
                reason: 'Environmental variables are okay',
            },
        ], true);
        cdk_nag_1.NagSuppressions.addResourceSuppressions(this.queueProcessingFargateService.taskDefinition, [
            {
                id: 'AwsSolutions-IAM5',
                reason: 'The ecr:GetAuthorizationToken requires "*"',
                appliesTo: [
                    'Resource::*',
                    'Resource::<Raw72517081.Arn>/*',
                    'Resource::<OutputAB65CDDE.Arn>/*',
                ],
            },
        ], true);
        // Inline policies
        let taskDefinitionRoles = [
            this.queueProcessingFargateService.taskDefinition.taskRole,
        ];
        if (this.queueProcessingFargateService.taskDefinition.executionRole) {
            taskDefinitionRoles.push(this.queueProcessingFargateService.taskDefinition.executionRole);
        }
        cdk_nag_1.NagSuppressions.addResourceSuppressions(taskDefinitionRoles, [
            {
                id: 'HIPAA.Security-IAMNoInlinePolicy',
                reason: 'Inline policies are acceptable for this use case.',
            },
            {
                id: 'NIST.800.53.R4-IAMNoInlinePolicy',
                reason: 'Inline policies are acceptable for this use case.',
            },
            {
                id: 'NIST.800.53.R5-IAMNoInlinePolicy',
                reason: 'Inline policies are acceptable for this use case.',
            },
            {
                id: 'PCI.DSS.321-IAMNoInlinePolicy',
                reason: 'Inline policies are acceptable for this use case.',
            },
        ], true);
        // Unencrypted CloudWatch logging
        cdk_nag_1.NagSuppressions.addResourceSuppressions(this.queueProcessingFargateService.taskDefinition, [
            {
                id: 'HIPAA.Security-CloudWatchLogGroupEncrypted',
                reason: 'CloudWatch logging is not encrypted',
            },
            {
                id: 'NIST.800.53.R4-CloudWatchLogGroupEncrypted',
                reason: 'CloudWatch logging is not encrypted',
            },
            {
                id: 'NIST.800.53.R5-CloudWatchLogGroupEncrypted',
                reason: 'CloudWatch logging is not encrypted',
            },
            {
                id: 'PCI.DSS.321-CloudWatchLogGroupEncrypted',
                reason: 'CloudWatch logging is not encrypted',
            },
            {
                id: 'HIPAA.Security-CloudWatchLogGroupRetentionPeriod',
                reason: 'CloudWatch logging is not encrypted',
            },
            {
                id: 'NIST.800.53.R4-CloudWatchLogGroupRetentionPeriod',
                reason: 'CloudWatch logging is not encrypted',
            },
            {
                id: 'NIST.800.53.R5-CloudWatchLogGroupRetentionPeriod',
                reason: 'CloudWatch logging is not encrypted',
            },
            {
                id: 'PCI.DSS.321-CloudWatchLogGroupRetentionPeriod',
                reason: 'CloudWatch logging is not encrypted',
            },
        ], true);
    }
}
exports.LlamaIndexDataLoader = LlamaIndexDataLoader;
_a = JSII_RTTI_SYMBOL_1;
LlamaIndexDataLoader[_a] = { fqn: "@cdklabs/generative-ai-cdk-constructs.LlamaIndexDataLoader", version: "0.1.285" };
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi9zcmMvcGF0dGVybnMvZ2VuLWFpL2F3cy1sbGFtYS1pbmRleC1kYXRhLWxvYWRlci9pbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7OztBQUFBOzs7Ozs7Ozs7OztHQVdHO0FBQ0gseUNBQWlDO0FBQ2pDLDZDQUE2RDtBQUM3RCxpREFBK0Q7QUFDL0QsK0RBQXdFO0FBQ3hFLGlEQUFzRztBQUN0RyxtRUFBNkU7QUFDN0UsaURBQWdGO0FBQ2hGLGlEQUEwQztBQUMxQywrQ0FBNEc7QUFDNUcsMkVBQWtFO0FBQ2xFLGlEQUE0QztBQUM1Qyw2RUFBb0U7QUFDcEUsaURBQTRDO0FBQzVDLGlEQUFzRDtBQUN0RCxxQ0FBMEM7QUFFMUMsMkRBQXNGO0FBbUR0RixNQUFhLG9CQUFxQixTQUFRLHNCQUFTO0lBV2pELFlBQVksS0FBZ0IsRUFBRSxFQUFVLEVBQUUsS0FBZ0M7UUFDeEUsS0FBSyxDQUFDLEtBQUssRUFBRSxFQUFFLENBQUMsQ0FBQztRQUVqQixNQUFNLFNBQVMsR0FBbUI7WUFDaEMsS0FBSyxFQUFFLEtBQUssQ0FBQyxLQUFLO1lBQ2xCLGFBQWEsRUFBRSwwQkFBYSxDQUFDLHVCQUF1QjtZQUNwRCxXQUFXLEVBQUUsRUFBRTtZQUNmLGFBQWEsRUFBRSxLQUFLLENBQUMsYUFBYTtTQUNuQyxDQUFDO1FBRUYsSUFBSSxDQUFDLGVBQWUsQ0FBQyxTQUFTLENBQUMsQ0FBQztRQUNoQyxJQUFJLENBQUMsMkJBQTJCLENBQUMsU0FBUyxDQUFDLENBQUM7UUFFNUMsbURBQW1EO1FBQ25ELElBQUksQ0FBQyx5QkFBeUIsR0FBRyxLQUFLLENBQUMseUJBQXlCLElBQUksSUFBQSxnQkFBSSxFQUN0RSxTQUFTLEVBQUUsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLFdBQVcsRUFBRSxRQUFRLEVBQUUsNkJBQTZCLEVBQUUsUUFBUSxDQUNsRyxD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LElBQUksQ0FDTCxDQUFDO0lBQ0osQ0FBQzs7QUFoYUgsb0RBaWFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiAgQ29weXJpZ2h0IEFtYXpvbi5jb20sIEluYy4gb3IgaXRzIGFmZmlsaWF0ZXMuIEFsbCBSaWdodHMgUmVzZXJ2ZWQuXG4gKlxuICogIExpY2Vuc2VkIHVuZGVyIHRoZSBBcGFjaGUgTGljZW5zZSwgVmVyc2lvbiAyLjAgKHRoZSBcIkxpY2Vuc2VcIikuIFlvdSBtYXkgbm90IHVzZSB0aGlzIGZpbGUgZXhjZXB0IGluIGNvbXBsaWFuY2VcbiAqICB3aXRoIHRoZSBMaWNlbnNlLiBBIGNvcHkgb2YgdGhlIExpY2Vuc2UgaXMgbG9jYXRlZCBhdFxuICpcbiAqICAgICAgaHR0cDovL3d3dy5hcGFjaGUub3JnL2xpY2Vuc2VzL0xJQ0VOU0UtMi4wXG4gKlxuICogIG9yIGluIHRoZSAnbGljZW5zZScgZmlsZSBhY2NvbXBhbnlpbmcgdGhpcyBmaWxlLiBUaGlzIGZpbGUgaXMgZGlzdHJpYnV0ZWQgb24gYW4gJ0FTIElTJyBCQVNJUywgV0lUSE9VVCBXQVJSQU5USUVTXG4gKiAgT1IgQ09ORElUSU9OUyBPRiBBTlkgS0lORCwgZXhwcmVzcyBvciBpbXBsaWVkLiBTZWUgdGhlIExpY2Vuc2UgZm9yIHRoZSBzcGVjaWZpYyBsYW5ndWFnZSBnb3Zlcm5pbmcgcGVybWlzc2lvbnNcbiAqICBhbmQgbGltaXRhdGlvbnMgdW5kZXIgdGhlIExpY2Vuc2UuXG4gKi9cbmltcG9ydCB7IGpvaW4gfSBmcm9tICdub2RlOnBhdGgnO1xuaW1wb3J0IHsgRHVyYXRpb24sIFJlbW92YWxQb2xpY3ksIFN0YWNrIH0gZnJvbSAnYXdzLWNkay1saWInO1xuaW1wb3J0IHsgRmxvd0xvZ0Rlc3RpbmF0aW9uLCBJVnBjIH0gZnJvbSAnYXdzLWNkay1saWIvYXdzLWVjMic7XG5pbXBvcnQgeyBEb2NrZXJJbWFnZUFzc2V0LCBQbGF0Zm9ybSB9IGZyb20gJ2F3cy1jZGstbGliL2F3cy1lY3ItYXNzZXRzJztcbmltcG9ydCB7IENsdXN0ZXIsIENvbnRhaW5lckltYWdlLCBDcHVBcmNoaXRlY3R1cmUsIE9wZXJhdGluZ1N5c3RlbUZhbWlseSB9IGZyb20gJ2F3cy1jZGstbGliL2F3cy1lY3MnO1xuaW1wb3J0IHsgUXVldWVQcm9jZXNzaW5nRmFyZ2F0ZVNlcnZpY2UgfSBmcm9tICdhd3MtY2RrLWxpYi9hd3MtZWNzLXBhdHRlcm5zJztcbmltcG9ydCB7IEVmZmVjdCwgUG9saWN5U3RhdGVtZW50LCBTZXJ2aWNlUHJpbmNpcGFsIH0gZnJvbSAnYXdzLWNkay1saWIvYXdzLWlhbSc7XG5pbXBvcnQgeyBLZXkgfSBmcm9tICdhd3MtY2RrLWxpYi9hd3Mta21zJztcbmltcG9ydCB7IEJsb2NrUHVibGljQWNjZXNzLCBCdWNrZXQsIEJ1Y2tldEVuY3J5cHRpb24sIEV2ZW50VHlwZSwgT2JqZWN0TG9ja01vZGUgfSBmcm9tICdhd3MtY2RrLWxpYi9hd3MtczMnO1xuaW1wb3J0IHsgU25zRGVzdGluYXRpb24gfSBmcm9tICdhd3MtY2RrLWxpYi9hd3MtczMtbm90aWZpY2F0aW9ucyc7XG5pbXBvcnQgeyBUb3BpYyB9IGZyb20gJ2F3cy1jZGstbGliL2F3cy1zbnMnO1xuaW1wb3J0IHsgU3FzU3Vic2NyaXB0aW9uIH0gZnJvbSAnYXdzLWNkay1saWIvYXdzLXNucy1zdWJzY3JpcHRpb25zJztcbmltcG9ydCB7IFF1ZXVlIH0gZnJvbSAnYXdzLWNkay1saWIvYXdzLXNxcyc7XG5pbXBvcnQgeyBTdHJpbmdQYXJhbWV0ZXIgfSBmcm9tICdhd3MtY2RrLWxpYi9hd3Mtc3NtJztcbmltcG9ydCB7IE5hZ1N1cHByZXNzaW9ucyB9IGZyb20gJ2Nkay1uYWcnO1xuaW1wb3J0IHsgQ29uc3RydWN0IH0gZnJvbSAnY29uc3RydWN0cyc7XG5pbXBvcnQgeyBCYXNlQ2xhc3MsIEJhc2VDbGFzc1Byb3BzLCBDb25zdHJ1Y3ROYW1lIH0gZnJvbSAnLi4vLi4vLi4vY29tbW9uL2Jhc2UtY2xhc3MnO1xuXG5leHBvcnQgaW50ZXJmYWNlIExsYW1hSW5kZXhEYXRhTG9hZGVyUHJvcHMge1xuICAvKipcbiAgICogVGhlIGRpcmVjdG9yeSB0byBidWlsZCB0aGUgRG9ja2VyIGltYWdlXG4gICAqIEBkZXNjcmlwdGlvbiBUaGUgZGlyZWN0b3J5IHRvIGJ1aWxkIHRoZSBEb2NrZXIgaW1hZ2UuXG4gICAqIEBkZWZhdWx0IF9fZGlybmFtZSArICcvZG9ja2VyJ1xuICAgKi9cbiAgcmVhZG9ubHkgZG9ja2VySW1hZ2VBc3NldERpcmVjdG9yeT86IHN0cmluZztcblxuICAvKipcbiAgICogVGhlIGRlZmF1bHQgbWVtb3J5XG4gICAqIEBkZXNjcmlwdGlvbiBUaGUgZGVmYXVsdCBtZW1vcnkuXG4gICAqIEBkZWZhdWx0IDIwNDhcbiAgICovXG4gIHJlYWRvbmx5IG1lbW9yeUxpbWl0TWlCPzogbnVtYmVyIHwgdW5kZWZpbmVkO1xuXG4gIC8qKlxuICAgKiBAZGVzY3JpcHRpb24gdGhlIGNvbnRhaW5lcidzIGxvZ2dpbmcgbGV2ZWxcbiAgICogQGRlZmF1bHQgJ1dBUk5JTkcnXG4gICAqL1xuICByZWFkb25seSBjb250YWluZXJMb2dnaW5nTGV2ZWw/OiBzdHJpbmc7XG5cbiAgLyoqXG4gICAqIEBkZXNjcmlwdGlvbiB0aGUgUzMgb3V0cHV0IHRvIHVzZVxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcbiAgICovXG4gIHJlYWRvbmx5IG91dHB1dEJ1Y2tldD86IEJ1Y2tldDtcblxuICAvKipcbiAgICogQGRlc2NyaXB0aW9uIHRoZSBWUEMgdG8gdXNlXG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxuICAgKi9cbiAgcmVhZG9ubHkgdnBjPzogSVZwYztcblxuICAvKipcbiAgICogVmFsdWUgd2lsbCBiZSBhcHBlbmRlZCB0byByZXNvdXJjZXMgbmFtZS5cbiAgICpcbiAgICogQGRlZmF1bHQgLSBfZGV2XG4gICAqL1xuICByZWFkb25seSBzdGFnZT86IHN0cmluZztcbiAgLyoqXG4gICAqIEVuYWJsZSBvYnNlcnZhYmlsaXR5LiBXYXJuaW5nOiBhc3NvY2lhdGVkIGNvc3Qgd2l0aCB0aGUgc2VydmljZXNcbiAgICogdXNlZC4gQmVzdCBwcmFjdGl2ZSB0byBlbmFibGUgYnkgZGVmYXVsdC5cbiAgICpcbiAgICogQGRlZmF1bHQgLSB0cnVlXG4gICAqL1xuICByZWFkb25seSBvYnNlcnZhYmlsaXR5PzogYm9vbGVhbjtcblxufVxuXG5leHBvcnQgY2xhc3MgTGxhbWFJbmRleERhdGFMb2FkZXIgZXh0ZW5kcyBCYXNlQ2xhc3Mge1xuXG4gIHB1YmxpYyByZWFkb25seSBvdXRwdXRCdWNrZXQ6IEJ1Y2tldDtcbiAgcHVibGljIHJlYWRvbmx5IHF1ZXVlUHJvY2Vzc2luZ0ZhcmdhdGVTZXJ2aWNlOiBRdWV1ZVByb2Nlc3NpbmdGYXJnYXRlU2VydmljZTtcblxuICBwcml2YXRlIHJlYWRvbmx5IGxvZ0J1Y2tldD86IEJ1Y2tldDtcbiAgcHJpdmF0ZSByZWFkb25seSBidWNrZXRLZXk/OiBLZXk7XG4gIHByaXZhdGUgcmVhZG9ubHkgZG9ja2VySW1hZ2VBc3NldERpcmVjdG9yeTogc3RyaW5nO1xuICBwcml2YXRlIHJlYWRvbmx5IG1lbW9yeUxpbWl0TWlCOiBudW1iZXI7XG4gIHByaXZhdGUgcmVhZG9ubHkgY29udGFpbmVyTG9nZ2luZ0xldmVsOiBzdHJpbmc7XG5cbiAgY29uc3RydWN0b3Ioc2NvcGU6IENvbnN0cnVjdCwgaWQ6IHN0cmluZywgcHJvcHM6IExsYW1hSW5kZXhEYXRhTG9hZGVyUHJvcHMpIHtcbiAgICBzdXBlcihzY29wZSwgaWQpO1xuXG4gICAgY29uc3QgYmFzZVByb3BzOiBCYXNlQ2xhc3NQcm9wcyA9IHtcbiAgICAgIHN0YWdlOiBwcm9wcy5zdGFnZSxcbiAgICAgIGNvbnN0cnVjdE5hbWU6IENvbnN0cnVjdE5hbWUuQVdTTExBTUFJTkRFWERBVEFMT0FERVIsXG4gICAgICBjb25zdHJ1Y3RJZDogaWQsXG4gICAgICBvYnNlcnZhYmlsaXR5OiBwcm9wcy5vYnNlcnZhYmlsaXR5LFxuICAgIH07XG5cbiAgICB0aGlzLnVwZGF0ZUVudlN1ZmZpeChiYXNlUHJvcHMpO1xuICAgIHRoaXMuYWRkT2JzZXJ2YWJpbGl0eVRvQ29uc3RydWN0KGJhc2VQcm9wcyk7XG5cbiAgICAvLyBVcGRhdGUgdGhlIG9wdGlvbmFsIHByb3BlcnRpZXMgdG8gdGhlaXIgZGVmYXVsdHNcbiAgICB0aGlzLmRvY2tlckltYWdlQXNzZXREaXJlY3RvcnkgPSBwcm9wcy5kb2NrZXJJbWFnZUFzc2V0RGlyZWN0b3J5ID8/IGpvaW4oXG4gICAgICBfX2Rpcm5hbWUsICcuLicsICcuLicsICcuLicsICcuLicsICdyZXNvdXJjZXMnLCAnZ2VuLWFpJywgJ2F3cy1sbGFtYS1pbmRleC1kYXRhLWxvYWRlcicsICdkb2NrZXInLFxuICAgICk7XG4gICAgdGhpcy5tZW1vcnlMaW1pdE1pQiA9IHByb3BzLm1lbW9yeUxpbWl0TWlCID8/IDIwNDg7XG4gICAgdGhpcy5jb250YWluZXJMb2dnaW5nTGV2ZWwgPSBwcm9wcy5jb250YWluZXJMb2dnaW5nTGV2ZWwgPz8gJ1dBUk5JTkcnO1xuICAgIGxldCBidWNrZXRzSW52b2x2ZWQgPSBbXTtcbiAgICBpZiAocHJvcHMub3V0cHV0QnVja2V0KSB7XG4gICAgICB0aGlzLm91dHB1dEJ1Y2tldCA9IHByb3BzLm91dHB1dEJ1Y2tldDtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5idWNrZXRLZXkgPSBuZXcgS2V5KHRoaXMsICdMb2dCdWNrZXRLZXknLCB7XG4gICAgICAgIGVuYWJsZUtleVJvdGF0aW9uOiB0cnVlLFxuICAgICAgfSk7XG4gICAgICB0aGlzLmxvZ0J1Y2tldCA9IG5ldyBCdWNrZXQodGhpcywgJ0xvZ0J1Y2tldCcsIHtcbiAgICAgICAgZW5mb3JjZVNTTDogdHJ1ZSxcbiAgICAgICAgdmVyc2lvbmVkOiB0cnVlLFxuICAgICAgICBlbmNyeXB0aW9uOiBCdWNrZXRFbmNyeXB0aW9uLktNUyxcbiAgICAgICAgZW5jcnlwdGlvbktleTogdGhpcy5idWNrZXRLZXksXG4gICAgICAgIGJ1Y2tldEtleUVuYWJsZWQ6IHRydWUsXG4gICAgICAgIHJlbW92YWxQb2xpY3k6IFJlbW92YWxQb2xpY3kuREVTVFJPWSxcbiAgICAgICAgYXV0b0RlbGV0ZU9iamVjdHM6IHRydWUsXG4gICAgICAgIG9iamVjdExvY2tFbmFibGVkOiB0cnVlLFxuICAgICAgICBvYmplY3RMb2NrRGVmYXVsdFJldGVudGlvbjoge1xuICAgICAgICAgIG1vZGU6IE9iamVjdExvY2tNb2RlLkdPVkVSTkFOQ0UsXG4gICAgICAgICAgZHVyYXRpb246IER1cmF0aW9uLmRheXMoMSksXG4gICAgICAgIH0sXG4gICAgICAgIGJsb2NrUHVibGljQWNjZXNzOiBCbG9ja1B1YmxpY0FjY2Vzcy5CTE9DS19BTEwsXG4gICAgICB9KTtcbiAgICAgIGJ1Y2tldHNJbnZvbHZlZC5wdXNoKHRoaXMubG9nQnVja2V0KTtcbiAgICAgIHRoaXMub3V0cHV0QnVja2V0ID0gbmV3IEJ1Y2tldCh0aGlzLCAnT3V0cHV0Jywge1xuICAgICAgICBlbmZvcmNlU1NMOiB0cnVlLFxuICAgICAgICB2ZXJzaW9uZWQ6IHRydWUsXG4gICAgICAgIHNlcnZlckFjY2Vzc0xvZ3NCdWNrZXQ6IHRoaXMubG9nQnVja2V0LFxuICAgICAgICBzZXJ2ZXJBY2Nlc3NMb2dzUHJlZml4OiAnb3V0cHV0LWJ1Y2tldC1hY2Nlc3MtbG9ncycsXG4gICAgICAgIGVuY3J5cHRpb246IEJ1Y2tldEVuY3J5cHRpb24uS01TLFxuICAgICAgICBlbmNyeXB0aW9uS2V5OiB0aGlzLmJ1Y2tldEtleSxcbiAgICAgICAgYnVja2V0S2V5RW5hYmxlZDogdHJ1ZSxcbiAgICAgICAgYmxvY2tQdWJsaWNBY2Nlc3M6IEJsb2NrUHVibGljQWNjZXNzLkJMT0NLX0FMTCxcbiAgICAgICAgcmVtb3ZhbFBvbGljeTogUmVtb3ZhbFBvbGljeS5ERVNUUk9ZLFxuICAgICAgICBhdXRvRGVsZXRlT2JqZWN0czogdHJ1ZSxcbiAgICAgICAgb2JqZWN0TG9ja0VuYWJsZWQ6IHRydWUsXG4gICAgICAgIG9iamVjdExvY2tEZWZhdWx0UmV0ZW50aW9uOiB7XG4gICAgICAgICAgbW9kZTogT2JqZWN0TG9ja01vZGUuR09WRVJOQU5DRSxcbiAgICAgICAgICBkdXJhdGlvbjogRHVyYXRpb24uZGF5cygxKSxcbiAgICAgICAgfSxcbiAgICAgICAgbGlmZWN5Y2xlUnVsZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ0Fib3J0SW5jb21wbGV0ZU11bHRpcGFydFVwbG9hZCcsXG4gICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgYWJvcnRJbmNvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkQWZ0ZXI6IER1cmF0aW9uLmRheXMoMSksXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0pO1xuICAgIH1cbiAgICBidWNrZXRzSW52b2x2ZWQucHVzaCh0aGlzLm91dHB1dEJ1Y2tldCk7XG4gICAgLy8gQ3JlYXRlIGEgbmV3IFNTTSBQYXJhbWV0ZXIgaG9sZGluZyBhIFN0cmluZ1xuICAgIGNvbnN0IGNpcmN1aXRCcmVha2VyUGFyYW1ldGVyID0gbmV3IFN0cmluZ1BhcmFtZXRlcih0aGlzLCAnQ2lyY3VpdEJyZWFrZXInLCB7XG4gICAgICBzdHJpbmdWYWx1ZTogJ0ZhbHNlJyxcbiAgICB9KTtcbiAgICBjb25zdCBhc3NldCA9IG5ldyBEb2NrZXJJbWFnZUFzc2V0KHRoaXMsICdJbWFnZScsIHtcbiAgICAgIGRpcmVjdG9yeTogdGhpcy5kb2NrZXJJbWFnZUFzc2V0RGlyZWN0b3J5LFxuICAgICAgcGxhdGZvcm06IFBsYXRmb3JtLkxJTlVYX0FNRDY0LFxuICAgIH0pO1xuICAgIGNvbnN0IHF1ZXVlID0gbmV3IFF1ZXVlKHRoaXMsICdRdWV1ZScsIHtcbiAgICAgIHZpc2liaWxpdHlUaW1lb3V0OiBEdXJhdGlvbi5zZWNvbmRzKDMwMCksXG4gICAgICBlbmZvcmNlU1NMOiB0cnVlLFxuICAgICAgZGVhZExldHRlclF1ZXVlOiB7XG4gICAgICAgIG1heFJlY2VpdmVDb3VudDogMyxcbiAgICAgICAgcXVldWU6IG5ldyBRdWV1ZSh0aGlzLCAnRGVhZExldHRlclF1ZXVlJywge1xuICAgICAgICAgIGVuZm9yY2VTU0w6IHRydWUsXG4gICAgICAgIH0pLFxuICAgICAgfSxcbiAgICB9KTtcbiAgICBjb25zdCBxdWV1ZVByb2Nlc3NpbmdGYXJnYXRlU2VydmljZSA9IG5ldyBRdWV1ZVByb2Nlc3NpbmdGYXJnYXRlU2VydmljZSh0aGlzLCAnU2VydmljZScsIHtcbiAgICAgIGNsdXN0ZXI6IHByb3BzLnZwYyA9PT0gdW5kZWZpbmVkID8gbmV3IENsdXN0ZXIodGhpcywgJ0NsdXN0ZXInLCB7XG4gICAgICAgIGNvbnRhaW5lckluc2lnaHRzOiB0cnVlLFxuICAgICAgfSkgOiB1bmRlZmluZWQsXG4gICAgICB2cGM6IHByb3BzLnZwYyxcbiAgICAgIG1lbW9yeUxpbWl0TWlCOiB0aGlzLm1lbW9yeUxpbWl0TWlCLFxuICAgICAgcnVudGltZVBsYXRmb3JtOiB7XG4gICAgICAgIGNwdUFyY2hpdGVjdHVyZTogQ3B1QXJjaGl0ZWN0dXJlLlg4Nl82NCxcbiAgICAgICAgb3BlcmF0aW5nU3lzdGVtRmFtaWx5OiBPcGVyYXRpbmdTeXN0ZW1GYW1pbHkuTElOVVgsXG4gICAgICB9LFxuICAgICAgcXVldWU6IHF1ZXVlLFxuICAgICAgaW1hZ2U6IENvbnRhaW5lckltYWdlLmZyb21Eb2NrZXJJbWFnZUFzc2V0KGFzc2V0KSxcbiAgICAgIGhlYWx0aENoZWNrOiB7XG4gICAgICAgIGNvbW1hbmQ6IFsnQ01ELVNIRUxMJywgJy91c3Ivc3JjL2FwcC9oZWFsdGhjaGVjay5zaCddLFxuICAgICAgICBpbnRlcnZhbDogRHVyYXRpb24uc2Vjb25kcygzMCksXG4gICAgICAgIHRpbWVvdXQ6IER1cmF0aW9uLnNlY29uZHMoMzApLFxuICAgICAgICByZXRyaWVzOiAzLFxuICAgICAgICBzdGFydFBlcmlvZDogRHVyYXRpb24uc2Vjb25kcyg1KSxcbiAgICAgIH0sXG4gICAgICBlbmFibGVMb2dnaW5nOiB0cnVlLFxuICAgICAgZW52aXJvbm1lbnQ6IHtcbiAgICAgICAgQ0lSQ1VJVF9CUkVBS0VSX1NTTV9QQVJBTUVURVJfTkFNRTogY2lyY3VpdEJyZWFrZXJQYXJhbWV0ZXIucGFyYW1ldGVyTmFtZSxcbiAgICAgICAgTE9HR0lOR19MRVZFTDogdGhpcy5jb250YWluZXJMb2dnaW5nTGV2ZWwsXG4gICAgICAgIEJVQ0tFVF9OQU1FOiB0aGlzLm91dHB1dEJ1Y2tldC5idWNrZXROYW1lLFxuICAgICAgfSxcbiAgICAgIG1pblNjYWxpbmdDYXBhY2l0eTogMCxcbiAgICAgIG1heFNjYWxpbmdDYXBhY2l0eTogMTAsXG4gICAgICBzY2FsaW5nU3RlcHM6XG4gICAgICAgICAgICBbXG4gICAgICAgICAgICAgIHsgdXBwZXI6IDAsIGNoYW5nZTogLTEgfSxcbiAgICAgICAgICAgICAgeyBsb3dlcjogMSwgY2hhbmdlOiArMSB9LCAvLyBiZWNhdXNlIGBtaW5TY2FsaW5nQ2FwYWNpdHlgIHNldCBhdCB6ZXJvXG4gICAgICAgICAgICAgIHsgbG93ZXI6IDEwMCwgY2hhbmdlOiArMSB9LFxuICAgICAgICAgICAgICB7IGxvd2VyOiA1MDAsIGNoYW5nZTogKzUgfSxcbiAgICAgICAgICAgIF0sXG4gICAgfSk7XG4gICAgdGhpcy5xdWV1ZVByb2Nlc3NpbmdGYXJnYXRlU2VydmljZSA9IHF1ZXVlUHJvY2Vzc2luZ0ZhcmdhdGVTZXJ2aWNlO1xuXG4gICAgLy8gU2V0dXAgRGVmYXVsdCBTMyBFeGFtcGxlIGlmIERvY2tlciBhc3NldCBkaXJlY3RvcnkgaXMgbWlzc2luZ1xuICAgIGlmICghcHJvcHMuZG9ja2VySW1hZ2VBc3NldERpcmVjdG9yeSkge1xuICAgICAgY29uc3QgcmF3QnVja2V0ID0gbmV3IEJ1Y2tldCh0aGlzLCAnUmF3Jywge1xuICAgICAgICBlbmZvcmNlU1NMOiB0cnVlLFxuICAgICAgICB2ZXJzaW9uZWQ6IHRydWUsXG4gICAgICAgIHNlcnZlckFjY2Vzc0xvZ3NCdWNrZXQ6IHRoaXMubG9nQnVja2V0LFxuICAgICAgICBlbmNyeXB0aW9uOiBCdWNrZXRFbmNyeXB0aW9uLktNUyxcbiAgICAgICAgZW5jcnlwdGlvbktleTogdGhpcy5idWNrZXRLZXksXG4gICAgICAgIGJ1Y2tldEtleUVuYWJsZWQ6IHRydWUsXG4gICAgICAgIHNlcnZlckFjY2Vzc0xvZ3NQcmVmaXg6ICdyYXctYnVja2V0LWFjY2Vzcy1sb2dzJyxcbiAgICAgICAgYmxvY2tQdWJsaWNBY2Nlc3M6IEJsb2NrUHVibGljQWNjZXNzLkJMT0NLX0FMTCxcbiAgICAgICAgcmVtb3ZhbFBvbGljeTogUmVtb3ZhbFBvbGljeS5ERVNUUk9ZLFxuICAgICAgICBhdXRvRGVsZXRlT2JqZWN0czogdHJ1ZSxcbiAgICAgICAgb2JqZWN0TG9ja0VuYWJsZWQ6IHRydWUsXG4gICAgICAgIG9iamVjdExvY2tEZWZhdWx0UmV0ZW50aW9uOiB7XG4gICAgICAgICAgbW9kZTogT2JqZWN0TG9ja01vZGUuR09WRVJOQU5DRSxcbiAgICAgICAgICBkdXJhdGlvbjogRHVyYXRpb24uZGF5cygxKSxcbiAgICAgICAgfSxcbiAgICAgICAgbGlmZWN5Y2xlUnVsZXM6IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ0Fib3J0SW5jb21wbGV0ZU11bHRpcGFydFVwbG9hZCcsXG4gICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxuICAgICAgICAgICAgYWJvcnRJbmNvbXBsZXRlTXVsdGlwYXJ0VXBsb2FkQWZ0ZXI6IER1cmF0aW9uLmRheXMoMSksXG4gICAgICAgICAgfSxcbiAgICAgICAgXSxcbiAgICAgIH0pO1xuICAgICAgYnVja2V0c0ludm9sdmVkLnB1c2gocmF3QnVja2V0KTtcbiAgICAgIGNvbnN0IHRvcGljS2V5ID0gbmV3IEtleSh0aGlzLCAnVG9waWNLZXknLCB7XG4gICAgICAgIGVuYWJsZUtleVJvdGF0aW9uOiB0cnVlLFxuICAgICAgfSk7XG4gICAgICBjb25zdCB0b3BpYyA9IG5ldyBUb3BpYyh0aGlzLCAnVG9waWMnLCB7XG4gICAgICAgIGVuZm9yY2VTU0w6IHRydWUsXG4gICAgICAgIG1hc3RlcktleTogdG9waWNLZXksXG4gICAgICB9KTtcbiAgICAgIHRvcGljS2V5LmFkZFRvUmVzb3VyY2VQb2xpY3koXG4gICAgICAgIG5ldyBQb2xpY3lTdGF0ZW1lbnQoe1xuICAgICAgICAgIGFjdGlvbnM6IFsna21zOkRlY3J5cHQnLCAna21zOkdlbmVyYXRlRGF0YUtleSonXSxcbiAgICAgICAgICByZXNvdXJjZXM6IFsnKiddLFxuICAgICAgICAgIHByaW5jaXBhbHM6IFtuZXcgU2VydmljZVByaW5jaXBhbCgnczMuYW1hem9uYXdzLmNvbScpXSxcbiAgICAgICAgfSksXG4gICAgICApO1xuICAgICAgdG9waWMuZ3JhbnRQdWJsaXNoKG5ldyBTZXJ2aWNlUHJpbmNpcGFsKCdzMy5hbWF6b25hd3MuY29tJykpO1xuICAgICAgcmF3QnVja2V0LmFkZEV2ZW50Tm90aWZpY2F0aW9uKFxuICAgICAgICBFdmVudFR5cGUuT0JKRUNUX0NSRUFURUQsXG4gICAgICAgIG5ldyBTbnNEZXN0aW5hdGlvbih0b3BpYyksXG4gICAgICApO1xuICAgICAgdG9waWMuYWRkU3Vic2NyaXB0aW9uKFxuICAgICAgICBuZXcgU3FzU3Vic2NyaXB0aW9uKHF1ZXVlKSxcbiAgICAgICk7XG4gICAgICB0aGlzLnF1ZXVlUHJvY2Vzc2luZ0ZhcmdhdGVTZXJ2aWNlLnRhc2tEZWZpbml0aW9uLmFkZFRvVGFza1JvbGVQb2xpY3koXG4gICAgICAgIG5ldyBQb2xpY3lTdGF0ZW1lbnQoe1xuICAgICAgICAgIGVmZmVjdDogRWZmZWN0LkFMTE9XLFxuICAgICAgICAgIGFjdGlvbnM6IFsnczM6R2V0T2JqZWN0J10sXG4gICAgICAgICAgcmVzb3VyY2VzOiBbcmF3QnVja2V0LmJ1Y2tldEFybiwgcmF3QnVja2V0LmJ1Y2tldEFybiArICcvKiddLFxuICAgICAgICB9KSxcbiAgICAgICk7XG4gICAgICBpZiAocmF3QnVja2V0LmVuY3J5cHRpb25LZXkpIHtcbiAgICAgICAgcmF3QnVja2V0LmVuY3J5cHRpb25LZXkuZ3JhbnREZWNyeXB0KHRoaXMucXVldWVQcm9jZXNzaW5nRmFyZ2F0ZVNlcnZpY2UudGFza0RlZmluaXRpb24udGFza1JvbGUpO1xuICAgICAgICB0aGlzLnF1ZXVlUHJvY2Vzc2luZ0ZhcmdhdGVTZXJ2aWNlLnRhc2tEZWZpbml0aW9uLnRhc2tSb2xlLmFkZFRvUHJpbmNpcGFsUG9saWN5KFxuICAgICAgICAgIG5ldyBQb2xpY3lTdGF0ZW1lbnQoe1xuICAgICAgICAgICAgZWZmZWN0OiBFZmZlY3QuQUxMT1csXG4gICAgICAgICAgICBhY3Rpb25zOiBbJ2ttczpHZW5lcmF0ZURhdGFLZXknXSxcbiAgICAgICAgICAgIHJlc291cmNlczogW3Jhd0J1Y2tldC5lbmNyeXB0aW9uS2V5LmtleUFybl0sXG4gICAgICAgICAgfSksXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIHRoaXMucXVldWVQcm9jZXNzaW5nRmFyZ2F0ZVNlcnZpY2UuY2x1c3Rlci52cGMuYWRkRmxvd0xvZygnRmxvd0xvZycsIHtcbiAgICAgIGRlc3RpbmF0aW9uOiBGbG93TG9nRGVzdGluYXRpb24udG9TMyh0aGlzLmxvZ0J1Y2tldCwgJ3ZwYy1mbG93LWxvZ3MnKSxcbiAgICB9KTtcbiAgICBjaXJjdWl0QnJlYWtlclBhcmFtZXRlci5ncmFudFJlYWQodGhpcy5xdWV1ZVByb2Nlc3NpbmdGYXJnYXRlU2VydmljZS50YXNrRGVmaW5pdGlvbi50YXNrUm9sZSk7XG4gICAgdGhpcy5xdWV1ZVByb2Nlc3NpbmdGYXJnYXRlU2VydmljZS50YXNrRGVmaW5pdGlvbi5hZGRUb1Rhc2tSb2xlUG9saWN5KFxuICAgICAgbmV3IFBvbGljeVN0YXRlbWVudCh7XG4gICAgICAgIGVmZmVjdDogRWZmZWN0LkFMTE9XLFxuICAgICAgICBhY3Rpb25zOiBbJ3MzOlB1dE9iamVjdCddLFxuICAgICAgICByZXNvdXJjZXM6IFt0aGlzLm91dHB1dEJ1Y2tldC5idWNrZXRBcm4sIHRoaXMub3V0cHV0QnVja2V0LmJ1Y2tldEFybiArICcvKiddLFxuICAgICAgfSksXG4gICAgKTtcbiAgICBpZiAodGhpcy5vdXRwdXRCdWNrZXQuZW5jcnlwdGlvbktleSkge1xuICAgICAgdGhpcy5vdXRwdXRCdWNrZXQuZW5jcnlwdGlvbktleS5ncmFudERlY3J5cHQodGhpcy5xdWV1ZVByb2Nlc3NpbmdGYXJnYXRlU2VydmljZS50YXNrRGVmaW5pdGlvbi50YXNrUm9sZSk7XG4gICAgICB0aGlzLnF1ZXVlUHJvY2Vzc2luZ0ZhcmdhdGVTZXJ2aWNlLnRhc2tEZWZpbml0aW9uLnRhc2tSb2xlLmFkZFRvUHJpbmNpcGFsUG9saWN5KFxuICAgICAgICBuZXcgUG9saWN5U3RhdGVtZW50KHtcbiAgICAgICAgICBlZmZlY3Q6IEVmZmVjdC5BTExPVyxcbiAgICAgICAgICBhY3Rpb25zOiBbJ2ttczpHZW5lcmF0ZURhdGFLZXknXSxcbiAgICAgICAgICByZXNvdXJjZXM6IFt0aGlzLm91dHB1dEJ1Y2tldC5lbmNyeXB0aW9uS2V5LmtleUFybl0sXG4gICAgICAgIH0pLFxuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICAvLyBOYWdTdXBwcmVzc2lvbnNcbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy9cbiAgICBpZiAodGhpcy5sb2dCdWNrZXQpIHtcbiAgICAgIE5hZ1N1cHByZXNzaW9ucy5hZGRSZXNvdXJjZVN1cHByZXNzaW9ucyh0aGlzLmxvZ0J1Y2tldCxcbiAgICAgICAgW1xuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnQXdzU29sdXRpb25zLVMxJyxcbiAgICAgICAgICAgIHJlYXNvbjogJ1RoZXJlIGlzIG5vIG5lZWQgdG8gZW5hYmxlIGFjY2VzcyBsb2dnaW5nIGZvciB0aGUgQWNjZXNzTG9ncyBidWNrZXQuJyxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICB0cnVlLFxuICAgICAgKTtcbiAgICB9XG4gICAgTmFnU3VwcHJlc3Npb25zLmFkZFJlc291cmNlU3VwcHJlc3Npb25zKGJ1Y2tldHNJbnZvbHZlZCxcbiAgICAgIFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnSElQQUEuU2VjdXJpdHktUzNCdWNrZXRSZXBsaWNhdGlvbkVuYWJsZWQnLFxuICAgICAgICAgIHJlYXNvbjogJ1JlcGxpY2F0aW9uIGZvciB0aGlzIHVzZSBjYXNlIGlzIHVuZWNjZXNzYXJ5LicsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ05JU1QuODAwLjUzLlI0LVMzQnVja2V0UmVwbGljYXRpb25FbmFibGVkJyxcbiAgICAgICAgICByZWFzb246ICdSZXBsaWNhdGlvbiBmb3IgdGhpcyB1c2UgY2FzZSBpcyB1bmVjY2Vzc2FyeS4nLFxuXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ05JU1QuODAwLjUzLlI1LVMzQnVja2V0UmVwbGljYXRpb25FbmFibGVkJyxcbiAgICAgICAgICByZWFzb246ICdSZXBsaWNhdGlvbiBmb3IgdGhpcyB1c2UgY2FzZSBpcyB1bmVjY2Vzc2FyeS4nLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdQQ0kuRFNTLjMyMS1TM0J1Y2tldFJlcGxpY2F0aW9uRW5hYmxlZCcsXG4gICAgICAgICAgcmVhc29uOiAnUmVwbGljYXRpb24gZm9yIHRoaXMgdXNlIGNhc2UgaXMgdW5lY2Nlc3NhcnkuJyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICB0cnVlLFxuICAgICk7XG4gICAgTmFnU3VwcHJlc3Npb25zLmFkZFJlc291cmNlU3VwcHJlc3Npb25zKFt0aGlzLnF1ZXVlUHJvY2Vzc2luZ0ZhcmdhdGVTZXJ2aWNlLmNsdXN0ZXIudnBjXSxcbiAgICAgIFtcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnSElQQUEuU2VjdXJpdHktVlBDU3VibmV0QXV0b0Fzc2lnblB1YmxpY0lwRGlzYWJsZWQnLFxuICAgICAgICAgIHJlYXNvbjogJ2RlZmF1bHQgdnBjIGNyZWF0aW9uJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnTklTVC44MDAuNTMuUjUtVlBDU3VibmV0QXV0b0Fzc2lnblB1YmxpY0lwRGlzYWJsZWQnLFxuICAgICAgICAgIHJlYXNvbjogJ2RlZmF1bHQgdnBjIGNyZWF0aW9uJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnUENJLkRTUy4zMjEtVlBDU3VibmV0QXV0b0Fzc2lnblB1YmxpY0lwRGlzYWJsZWQnLFxuICAgICAgICAgIHJlYXNvbjogJ2RlZmF1bHQgdnBjIGNyZWF0aW9uJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnSElQQUEuU2VjdXJpdHktVlBDTm9VbnJlc3RyaWN0ZWRSb3V0ZVRvSUdXJyxcbiAgICAgICAgICByZWFzb246ICdkZWZhdWx0IHZwYyBjcmVhdGlvbicsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ05JU1QuODAwLjUzLlI1LVZQQ05vVW5yZXN0cmljdGVkUm91dGVUb0lHVycsXG4gICAgICAgICAgcmVhc29uOiAnZGVmYXVsdCB2cGMgY3JlYXRpb24nLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdQQ0kuRFNTLjMyMS1WUENOb1VucmVzdHJpY3RlZFJvdXRlVG9JR1cnLFxuICAgICAgICAgIHJlYXNvbjogJ2RlZmF1bHQgdnBjIGNyZWF0aW9uJyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICB0cnVlLFxuICAgICk7XG5cbiAgICAvLyBTdXBwcmVzcyBmaW5kaW5ncyBmb3IgdGhlIEJ1Y2tldE5vdGlmaWNhdGlvbnNIYW5kbGVyXG4gICAgLy8gaHR0cHM6Ly9naXRodWIuY29tL2F3cy9hd3MtY2RrL2lzc3Vlcy85NTUyXG4gICAgY29uc3QgYnVja2V0Tm90aWZpY2F0aW9ucyA9IFN0YWNrLm9mKHRoaXMpLm5vZGUudHJ5RmluZENoaWxkKCdCdWNrZXROb3RpZmljYXRpb25zSGFuZGxlcjA1MGEwNTg3Yjc1NDQ1NDdiZjMyNWYwOTRhM2RiODM0Jyk7XG4gICAgaWYgKGJ1Y2tldE5vdGlmaWNhdGlvbnMpIHtcbiAgICAgIE5hZ1N1cHByZXNzaW9ucy5hZGRSZXNvdXJjZVN1cHByZXNzaW9ucyhidWNrZXROb3RpZmljYXRpb25zLFxuICAgICAgICBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgaWQ6ICdBd3NTb2x1dGlvbnMtSUFNNCcsXG4gICAgICAgICAgICByZWFzb246ICdBV1NMYW1iZGFCYXNpY0V4ZWN1dGlvblJvbGUgaXMgdXNlZCBieSBgYWRkRXZlbnROb3RpZmljYXRpb25gJyxcbiAgICAgICAgICAgIGFwcGxpZXNUbzogWydQb2xpY3k6OmFybjo8QVdTOjpQYXJ0aXRpb24+OmlhbTo6YXdzOnBvbGljeS9zZXJ2aWNlLXJvbGUvQVdTTGFtYmRhQmFzaWNFeGVjdXRpb25Sb2xlJ10sXG4gICAgICAgICAgfSxcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogJ0F3c1NvbHV0aW9ucy1JQU01JyxcbiAgICAgICAgICAgIHJlYXNvbjogJ1N1cHByZXNzIGFsbCBBd3NTb2x1dGlvbnMtSUFNNSBmaW5kaW5ncyBmb3IgdGhpcyBzdGFjaycsXG4gICAgICAgICAgICBhcHBsaWVzVG86IFsnUmVzb3VyY2U6OionXSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnSElQQUEuU2VjdXJpdHktSUFNTm9JbmxpbmVQb2xpY3knLFxuICAgICAgICAgICAgcmVhc29uOiAnSW5saW5lIHBvbGljaWVzIGFyZSBwYXJ0IG9mIHRoZSBCdWNrZXRIYW5kbGVyTm90aWZpY2F0aW9uJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnTklTVC44MDAuNTMuUjQtSUFNTm9JbmxpbmVQb2xpY3knLFxuICAgICAgICAgICAgcmVhc29uOiAnSW5saW5lIHBvbGljaWVzIGFyZSBwYXJ0IG9mIHRoZSBCdWNrZXRIYW5kbGVyTm90aWZpY2F0aW9uJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnTklTVC44MDAuNTMuUjUtSUFNTm9JbmxpbmVQb2xpY3knLFxuICAgICAgICAgICAgcmVhc29uOiAnSW5saW5lIHBvbGljaWVzIGFyZSBwYXJ0IG9mIHRoZSBCdWNrZXRIYW5kbGVyTm90aWZpY2F0aW9uJyxcbiAgICAgICAgICB9LFxuICAgICAgICAgIHtcbiAgICAgICAgICAgIGlkOiAnUENJLkRTUy4zMjEtSUFNTm9JbmxpbmVQb2xpY3knLFxuICAgICAgICAgICAgcmVhc29uOiAnSW5saW5lIHBvbGljaWVzIGFyZSBwYXJ0IG9mIHRoZSBCdWNrZXRIYW5kbGVyTm90aWZpY2F0aW9uJyxcbiAgICAgICAgICB9LFxuICAgICAgICBdLFxuICAgICAgICB0cnVlLFxuICAgICAgKTtcbiAgICB9XG4gICAgTmFnU3VwcHJlc3Npb25zLmFkZFJlc291cmNlU3VwcHJlc3Npb25zKHRoaXMucXVldWVQcm9jZXNzaW5nRmFyZ2F0ZVNlcnZpY2UsXG4gICAgICBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ0F3c1NvbHV0aW9ucy1FQ1MyJyxcbiAgICAgICAgICByZWFzb246ICdFbnZpcm9ubWVudGFsIHZhcmlhYmxlcyBhcmUgb2theScsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgdHJ1ZSxcbiAgICApO1xuICAgIE5hZ1N1cHByZXNzaW9ucy5hZGRSZXNvdXJjZVN1cHByZXNzaW9ucyh0aGlzLnF1ZXVlUHJvY2Vzc2luZ0ZhcmdhdGVTZXJ2aWNlLnRhc2tEZWZpbml0aW9uLFxuICAgICAgW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdBd3NTb2x1dGlvbnMtSUFNNScsXG4gICAgICAgICAgcmVhc29uOiAnVGhlIGVjcjpHZXRBdXRob3JpemF0aW9uVG9rZW4gcmVxdWlyZXMgXCIqXCInLFxuICAgICAgICAgIGFwcGxpZXNUbzogW1xuICAgICAgICAgICAgJ1Jlc291cmNlOjoqJyxcbiAgICAgICAgICAgICdSZXNvdXJjZTo6PFJhdzcyNTE3MDgxLkFybj4vKicsXG4gICAgICAgICAgICAnUmVzb3VyY2U6OjxPdXRwdXRBQjY1Q0RERS5Bcm4+LyonLFxuICAgICAgICAgIF0sXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgdHJ1ZSxcbiAgICApO1xuXG4gICAgLy8gSW5saW5lIHBvbGljaWVzXG4gICAgbGV0IHRhc2tEZWZpbml0aW9uUm9sZXMgPSBbXG4gICAgICB0aGlzLnF1ZXVlUHJvY2Vzc2luZ0ZhcmdhdGVTZXJ2aWNlLnRhc2tEZWZpbml0aW9uLnRhc2tSb2xlLFxuICAgIF07XG4gICAgaWYgKHRoaXMucXVldWVQcm9jZXNzaW5nRmFyZ2F0ZVNlcnZpY2UudGFza0RlZmluaXRpb24uZXhlY3V0aW9uUm9sZSkge1xuICAgICAgdGFza0RlZmluaXRpb25Sb2xlcy5wdXNoKHRoaXMucXVldWVQcm9jZXNzaW5nRmFyZ2F0ZVNlcnZpY2UudGFza0RlZmluaXRpb24uZXhlY3V0aW9uUm9sZSk7XG4gICAgfVxuICAgIE5hZ1N1cHByZXNzaW9ucy5hZGRSZXNvdXJjZVN1cHByZXNzaW9ucyh0YXNrRGVmaW5pdGlvblJvbGVzLFxuICAgICAgW1xuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdISVBBQS5TZWN1cml0eS1JQU1Ob0lubGluZVBvbGljeScsXG4gICAgICAgICAgcmVhc29uOiAnSW5saW5lIHBvbGljaWVzIGFyZSBhY2NlcHRhYmxlIGZvciB0aGlzIHVzZSBjYXNlLicsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ05JU1QuODAwLjUzLlI0LUlBTU5vSW5saW5lUG9saWN5JyxcbiAgICAgICAgICByZWFzb246ICdJbmxpbmUgcG9saWNpZXMgYXJlIGFjY2VwdGFibGUgZm9yIHRoaXMgdXNlIGNhc2UuJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnTklTVC44MDAuNTMuUjUtSUFNTm9JbmxpbmVQb2xpY3knLFxuICAgICAgICAgIHJlYXNvbjogJ0lubGluZSBwb2xpY2llcyBhcmUgYWNjZXB0YWJsZSBmb3IgdGhpcyB1c2UgY2FzZS4nLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdQQ0kuRFNTLjMyMS1JQU1Ob0lubGluZVBvbGljeScsXG4gICAgICAgICAgcmVhc29uOiAnSW5saW5lIHBvbGljaWVzIGFyZSBhY2NlcHRhYmxlIGZvciB0aGlzIHVzZSBjYXNlLicsXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgdHJ1ZSxcbiAgICApO1xuXG4gICAgLy8gVW5lbmNyeXB0ZWQgQ2xvdWRXYXRjaCBsb2dnaW5nXG4gICAgTmFnU3VwcHJlc3Npb25zLmFkZFJlc291cmNlU3VwcHJlc3Npb25zKHRoaXMucXVldWVQcm9jZXNzaW5nRmFyZ2F0ZVNlcnZpY2UudGFza0RlZmluaXRpb24sXG4gICAgICBbXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ0hJUEFBLlNlY3VyaXR5LUNsb3VkV2F0Y2hMb2dHcm91cEVuY3J5cHRlZCcsXG4gICAgICAgICAgcmVhc29uOiAnQ2xvdWRXYXRjaCBsb2dnaW5nIGlzIG5vdCBlbmNyeXB0ZWQnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdOSVNULjgwMC41My5SNC1DbG91ZFdhdGNoTG9nR3JvdXBFbmNyeXB0ZWQnLFxuICAgICAgICAgIHJlYXNvbjogJ0Nsb3VkV2F0Y2ggbG9nZ2luZyBpcyBub3QgZW5jcnlwdGVkJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnTklTVC44MDAuNTMuUjUtQ2xvdWRXYXRjaExvZ0dyb3VwRW5jcnlwdGVkJyxcbiAgICAgICAgICByZWFzb246ICdDbG91ZFdhdGNoIGxvZ2dpbmcgaXMgbm90IGVuY3J5cHRlZCcsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ1BDSS5EU1MuMzIxLUNsb3VkV2F0Y2hMb2dHcm91cEVuY3J5cHRlZCcsXG4gICAgICAgICAgcmVhc29uOiAnQ2xvdWRXYXRjaCBsb2dnaW5nIGlzIG5vdCBlbmNyeXB0ZWQnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdISVBBQS5TZWN1cml0eS1DbG91ZFdhdGNoTG9nR3JvdXBSZXRlbnRpb25QZXJpb2QnLFxuICAgICAgICAgIHJlYXNvbjogJ0Nsb3VkV2F0Y2ggbG9nZ2luZyBpcyBub3QgZW5jcnlwdGVkJyxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGlkOiAnTklTVC44MDAuNTMuUjQtQ2xvdWRXYXRjaExvZ0dyb3VwUmV0ZW50aW9uUGVyaW9kJyxcbiAgICAgICAgICByZWFzb246ICdDbG91ZFdhdGNoIGxvZ2dpbmcgaXMgbm90IGVuY3J5cHRlZCcsXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBpZDogJ05JU1QuODAwLjUzLlI1LUNsb3VkV2F0Y2hMb2dHcm91cFJldGVudGlvblBlcmlvZCcsXG4gICAgICAgICAgcmVhc29uOiAnQ2xvdWRXYXRjaCBsb2dnaW5nIGlzIG5vdCBlbmNyeXB0ZWQnLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgaWQ6ICdQQ0kuRFNTLjMyMS1DbG91ZFdhdGNoTG9nR3JvdXBSZXRlbnRpb25QZXJpb2QnLFxuICAgICAgICAgIHJlYXNvbjogJ0Nsb3VkV2F0Y2ggbG9nZ2luZyBpcyBub3QgZW5jcnlwdGVkJyxcbiAgICAgICAgfSxcbiAgICAgIF0sXG4gICAgICB0cnVlLFxuICAgICk7XG4gIH1cbn0iXX0=